##
## File:        $URL: svn+ssh://tux262.llnl.gov/usr/casc/samrai/repository/PARFLOW/trunk/config/Makefile.config.in $
## Package:     PARFLOW makefile system
## Copyright:   (c) 1997-2008 Lawrence Livermore National Security, LLC
## Revision:    $LastChangedRevision: 2195 $
## Modified:    $LastChangedDate: 2008-05-14 11:33:30 -0700 (Wed, 14 May 2008) $
## Description: configuration makefile included by all PARFLOW makefiles
##

.SUFFIXES:
.SUFFIXES: .o .F .f .c .C .cc .cxx .F90

.F90.o:
	$(FC) $(FCFLAGS) -c $< -o $@
.F.o:
	$(F77) $(FFLAGS) -c $< -o $@
.f.o:
	$(F77) $(FFLAGS) -c $< -o $@
.c.o:
	$(CC) $(CFLAGS) $(CPPFLAGS) -c $< -o $@
.cxx.o:
	$(CC) $(CFLAGS) $(CPPFLAGS) -c $< -o $@

SHELL         = /bin/sh

INSTALL	                        = sh $(PARFLOW)/config/install-sh
PARFLOW_INSTALL_DIR	        = /usr/local

AMPS                            = mpi1
AMPS_DIR                        = amps/$(AMPS)

AMPS_INCLUDE_DIR                = $(PARFLOW)/$(AMPS_DIR)
AMPS_COMMON_INCLUDE_DIR         = $(PARFLOW)/amps/common

KINSOL_INCLUDE_DIR              = $(PARFLOW)/kinsol

# SGS these need to be generated by configure
AMPS_FLAGS = -DAMPS_PRINT_HOSTNAME

AMPS_LIB                        = libamps.a
AMPS_COMMON_LIB                 = libamps_common.a
PARFLOW_LIB                     = libparflow.a
KINSOL_LIB                      = libkinsol.a

SAMRAI_DIR                      = 

#
# These are controlled by the --with-clm flag to configure
#
CLM_LIB				= libclm.a
CLM_LIBS                        = -lclm
CLM_DIR                         = clm
CLM_LIB_DEPEND                  = $(PARFLOW_LIB_DIR)/libclm.a

PARFLOW_INCLUDE_DIR             = $(PARFLOW)/parflow_lib
PARFLOW_CONFIGURE_INCLUDE_DIR   = $(OBJECT)/include
PARFLOW_LIB_DIR                 = $(OBJECT)/lib
PARFLOW_BIN_DIR                 = $(OBJECT)/bin

AMPS_LIBS                       = -lamps -lamps_common -lamps -lamps_common
AMPS_LIB_DEPEND                 = $(PARFLOW_LIB_DIR)/libamps_common.a $(PARFLOW_LIB_DIR)/libamps.a

PARFLOW_LIBS = -L$(PARFLOW_LIB_DIR) -lparflow $(CLM_LIBS) $(AMPS_LIBS) -lkinsol
PARFLOW_LIB_DEPEND = $(PARFLOW_LIB_DIR)/$(PARFLOW_LIB) $(PARFLOW_LIB_DIR)/$(KINSOL_LIB)

LIB_SUFFIX=.a

M4	      =	
RM            = rm -fr
CP            = cp
XARGS	      = 

F77           = gfortran
FFLAGS        = -O2  $(FFLAGS_EXTRA)

FC            = gfortran
FCFLAGS       = -Wall -Wunused -fimplicit-none -free -O2 

CC            = gcc
CFLAGS        = -Wno-write-strings -Wconversion -Wextra -Wall -O2  $(CFLAGS_EXTRA) $(AMPS_FLAGS)

CPPFLAGS      =  -I. \
	      -I$(PARFLOW_CONFIGURE_INCLUDE_DIR) -I$(PARFLOW_INCLUDE_DIR) \
	      -I$(AMPS_COMMON_INCLUDE_DIR) -I$(AMPS_INCLUDE_DIR) \
	      -I/usr/include -I/usr/lib/include -I/usr/lib/include/sundials -I/usr/lib/include/kinsol     -I/usr/lib/openmpi/include  $(CPPFLAGS_EXTRA)

AR	      = ar

LDFLAGS       =  -L$(PARFLOW_LIB_DIR)  -L/usr/lib  -L/usr/lib    -L/usr//lib -L/usr/lib/openmpi/lib   -L/usr/lib/gcc/x86_64-linux-gnu/4.8 -L/usr/lib/gcc/x86_64-linux-gnu/4.8/../../../x86_64-linux-gnu -L/usr/lib/gcc/x86_64-linux-gnu/4.8/../../../../lib -L/lib/x86_64-linux-gnu -L/lib/../lib -L/usr/lib/x86_64-linux-gnu -L/usr/lib/../lib -L/usr/lib/gcc/x86_64-linux-gnu/4.8/../../..  -L/usr/lib/gcc/x86_64-linux-gnu/4.8 -L/usr/lib/gcc/x86_64-linux-gnu/4.8/../../../x86_64-linux-gnu -L/usr/lib/gcc/x86_64-linux-gnu/4.8/../../../../lib -L/lib/x86_64-linux-gnu -L/lib/../lib -L/usr/lib/x86_64-linux-gnu -L/usr/lib/../lib -L/usr/lib/gcc/x86_64-linux-gnu/4.8/../../.. -L/usr/lib/gcc/x86_64-linux-gnu/4.8 -L/usr/lib/gcc/x86_64-linux-gnu/4.8/../../../x86_64-linux-gnu -L/usr/lib/gcc/x86_64-linux-gnu/4.8/../../../../lib -L/lib/x86_64-linux-gnu -L/lib/../lib -L/usr/lib/x86_64-linux-gnu -L/usr/lib/../lib -L/usr/lib/gcc/x86_64-linux-gnu/4.8/../../.. -L/usr/lib/lib $(LDFLAGS_EXTRA)
LDLIBS        = $(LDLIBS_EXTRA)  -lHYPRE -lHYPRE_struct_mv -lHYPRE_struct_ls -lsiloh5    -lmpi  -L/usr/lib/gcc/x86_64-linux-gnu/4.8/../../.. -L/usr/lib/../lib -L/usr/lib/x86_64-linux-gnu -L/lib/../lib -L/lib/x86_64-linux-gnu -L/usr/lib/gcc/x86_64-linux-gnu/4.8/../../../../lib -L/usr/lib/gcc/x86_64-linux-gnu/4.8/../../../x86_64-linux-gnu -L/usr/lib/gcc/x86_64-linux-gnu/4.8  -lgfortran -lm -lgcc_s -lgcc -lquadmath -lm -lm  -lgfortran -lm -lquadmath  -lgfortran -lm -lquadmath -lm -lgcc_s -lgcc -lquadmath -lm -lsundials_cvode -lsundials_kinsol

PARFLOW_HAVE_CLM       = yes
PARFLOW_HAVE_SILO      = yes
PARFLOW_HAVE_HYPRE     = yes
PARFLOW_HAVE_SAMRAI    = no
PARFLOW_HAVE_OAS3      = no

######################################################################
# Rules used in all directories.
######################################################################

PARFLOW_CLEAN=@$(RM) *.o *.ii *.int.c *.log *.log.* stamp-* core core.* stats -r ti_files ii_files

